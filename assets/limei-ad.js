!function(){var scheme,LM,UID_COOKIE_KEY,IFRAME_IDEA,w,d,debug,className,idAttr,slotIdAttr,attrMap,lm,main_domain_reg,setCookie,getCookie,randMath,uuidParse,getUid,getRealUid,get_ad_func;document.getElementsByClassName||(document.getElementsByClassName=function(a,b){var c,d,e,f,g,h;for(c=(b||document).getElementsByTagName("*"),d=new Array,e=0;e<c.length;e++)for(f=c[e],g=f.className.split(" "),h=0;h<g.length;h++)if(g[h]==a){d.push(f);break}return d}),scheme="https:"==document.location.protocol?"https":"http",LM="lm_pmp",UID_COOKIE_KEY=LM+"_uid",IFRAME_IDEA=LM+"_idea",w=window,d=document,debug=!1,className="limei_ad",idAttr="data-limei-id",slotIdAttr="data-limei-slotid",attrMap={"data-shop-id":"s","data-uid":"t","data-mac":"m","data-address-id":"s"},lm=w.limeiAdObject||"lmAd",main_domain_reg=/[-0-9a-z]+\.((com\.cn|net\.cn|org\.cn|gov\.cn)|[a-z]{2,5})($|\/)/gi,setCookie=function(a,b,c){var d="",e="/",f=new Date;f.setTime(f.getTime()+c),d=window.location.host||window.location.hostname,d=d.match(main_domain_reg),d&&d.length>0&&(d=d[0]),document.cookie=a+"="+b+";expires="+f.toGMTString()+";path="+e+";domain="+d},getCookie=function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=b?unescape(b[2]):null},randMath=function(){var c,b,a=new Array(16);for(b=0;16>b;b++)0==(3&b)&&(c=4294967296*Math.random()),a[b]=255&c>>>((3&b)<<3);return a},uuidParse=function(a,b){var e,f,c=[],d={};for(e=0;256>e;e++)c[e]=(e+256).toString(16).substr(1),d[c[e]]=e;return e=b||0,f=c,f[a[e++]]+f[a[e++]]+f[a[e++]]+f[a[e++]]+f[a[e++]]+f[a[e++]]+f[a[e++]]+f[a[e++]]+f[a[e++]]+f[a[e++]]},getUid=function(){var b,a=randMath();return a[6]=64|15&a[6],a[8]=128|63&a[8],b=uuidParse(a),debug&&c&&c.log(b),b},getRealUid=function(){var a="";return a=getCookie(UID_COOKIE_KEY),a||(a=getUid(),setCookie(UID_COOKIE_KEY,a,31536e7)),a},get_ad_func=function(parent){var iframeCallBack,self=this,browser=null,ad_option=window.lm_pmp_ad_option||function(){var a=parent.offsetWidth,b=parent.offsetHeight;try{"undefined"!=typeof a&&a||(a=Number(parent.style.width.toLowerCase().replace("px","")),b=Number(parent.style.height.toLowerCase().replace("px","")))}catch(c){console.log(c.message)}return{id:parent.getAttribute(idAttr),slot_id:parent.getAttribute(slotIdAttr),slot_width:a,slot_height:b}}();this.getAttr=function(){var c,a="",b="";for(c in attrMap)b=parent.getAttribute(c),b&&(a+="&"+attrMap[c]+"="+b);return a},this.getFlashVersion=function(){var ii,fl,f="-",n=navigator;if(n.plugins&&n.plugins.length){for(ii=0;ii<n.plugins.length;ii++)if(-1!=n.plugins[ii].name.indexOf("Shockwave Flash")){f=n.plugins[ii].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(ii=10;ii>=2;ii--)try{if(fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');")){f=ii+".0";break}}catch(e){}return f},this.getBrowserInfo=function(){if(browser)return browser;var a={};a.platform=navigator.platform,a.language=navigator.language||navigator.browserLanguage,a.viewpoint={x:document.body.clientWidth,y:document.body.clientHeight},a.resolution={x:window.screen.width,y:window.screen.height},a.charset=document.charset||document.characterSet,a.flashVersion=encodeURIComponent(self.getFlashVersion());try{a.url=encodeURIComponent(window.top.location.href),a.refurl=encodeURIComponent(window.top.document.referrer)}catch(b){a.url=encodeURIComponent(window.location.href),a.refurl=encodeURIComponent(window.document.referrer)}return a.domain=document.domain,a.devicePixelRatio=window.devicePixelRatio?window.devicePixelRatio:1,browser=a},this.genInfoUrl=function(){var a=self.getBrowserInfo(),b="";return b="l="+a.language,b+="&sw="+a.resolution.x,b+="&sh="+a.resolution.y,b+="&pl="+a.platform,b+="&sc="+a.devicePixelRatio,b+="&dom="+a.domain},this.genOptionUrl=function(){var a="";return a="id="+ad_option.slot_id,a+="&w="+ad_option.slot_width,a+="&h="+ad_option.slot_height,a+="&udid="+getRealUid(),a+=getAttr()},this.genShowUrl=function(){return"http://bid.ex.ljrtb.cn/m/adjs?"+self.genInfoUrl()+"&"+self.genOptionUrl()},this.getAdInfo=function(a){for(var b=a.offsetLeft,c=a.offsetTop,d=a.offsetParent;null!==d;)b+=d.offsetLeft,c+=d.offsetTop,d=d.offsetParent;return{x:b,y:c}},this.genBody=function(a,b){var i,c=1,d=self.getBrowserInfo().viewpoint.x,e=self.getBrowserInfo().viewpoint.y,f=self.getAdInfo(a),g=f.x+ad_option.slot_width,h=f.y+ad_option.slot_height;return c=e>=h&&d>=g&&f.x>=0&&f.y>=0?1:0>=h||0>=g||f.x>=d||f.y>=e?0:2,i=self.genShowUrl()+"&url="+window.location.href+"&ref="+document.referrer+"#"+b,'<iframe id="'+IFRAME_IDEA+"_"+b+'" width="'+ad_option.slot_width+'" height="'+ad_option.slot_height+'" src="'+i+'" frameborder="0" scrolling="no"></iframe>'},iframeCallBack=function(a){var b,c,d;"object"==typeof a&&a.data&&(a=a.data),a.indexOf(LM)>-1&&(b=a.split("|"),c=b[1],d=b[2],c&&"404"==d&&(document.getElementById(IFRAME_IDEA+"_"+c).style.display="none"))},"addEventListener"in document?window.addEventListener("message",iframeCallBack,!1):"attachEvent"in document&&window.attachEvent("onmessage",iframeCallBack)},window.limei_get_ad=window.limei_get_ad||get_ad_func,function(){var a=function(a,b){var c=new limei_get_ad(a),d=c.genBody(a,b);a.innerHTML=d},b=function(){for(var c=document.getElementsByClassName(className),d=0;d<c.length;d++)a(c[d],d);return[]};w[lm]=new b(w[lm])}()}();